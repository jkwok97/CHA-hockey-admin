<mat-progress-bar mode="query" color="accent" *ngIf="isLoading"></mat-progress-bar>

<mat-card *ngIf="(table$ | async)">

    <mat-card-header *ngIf="row">
        <mat-card-title>{{row.city}} {{row.nickname}}</mat-card-title>
        <mat-card-subtitle>{{row.draft_year}}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>

        <form [formGroup]="tableForm">

            <mat-form-field color="accent">
                <mat-label>Round 1</mat-label>
                <mat-select formControlName="round_one">
                    <mat-option *ngFor="let team of (teams$ | async)" [value]="team.id">
                        {{team.city}} {{team.nickname}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field color="accent">
                <mat-label>Round 2</mat-label>
                <mat-select formControlName="round_two">
                    <mat-option *ngFor="let team of (teams$ | async)" [value]="team.id">
                        {{team.city}} {{team.nickname}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field color="accent">
                <mat-label>Round 3</mat-label>
                <mat-select formControlName="round_three">
                    <mat-option *ngFor="let team of (teams$ | async)" [value]="team.id">
                        {{team.city}} {{team.nickname}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field color="accent">
                <mat-label>Round 4</mat-label>
                <mat-select formControlName="round_four">
                    <mat-option *ngFor="let team of (teams$ | async)" [value]="team.id">
                        {{team.city}} {{team.nickname}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field color="accent">
                <mat-label>Round 5</mat-label>
                <mat-select formControlName="round_five">
                    <mat-option *ngFor="let team of (teams$ | async)" [value]="team.id">
                        {{team.city}} {{team.nickname}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
    
        </form>

    </mat-card-content>

    <mat-card-actions>

        <button 
            mat-raised-button 
            color="accent" 
            type="submit" 
            *ngIf="!isSaving"
            [disabled]="tableForm.invalid"
            (click)="onSave()" 
        >
            Save
        </button>

        <button 
            mat-raised-button 
            color="primary" 
            (click)="onCancel()" 
            *ngIf="!isSaving"
        >   
            Cancel
        </button>

        <mat-spinner color="accent" *ngIf="isSaving" diameter="30"></mat-spinner>

    </mat-card-actions>

</mat-card>

